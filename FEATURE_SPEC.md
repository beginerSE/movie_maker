# News Short Generator Studio 機能仕様書（現行版）

## 1. 概要
- 対象アプリケーション: News Short Generator Studio（Windows向けGUIツール）
- 目的: 台本生成〜動画生成、素材作成、簡易/詳細編集までを一つのGUIで完結させる。主に縦型ショート動画制作を想定。出力・編集は MoviePy を中心に実行する。 
- UI構成: 左サイドバー（ページ切替）、中央フォーム（各機能）、右ログ/進捗エリア。 

## 2. ページ構成と機能
### 2.1 動画生成ページ
**目的**: 台本 + 画像 + TTS を用いて短尺動画を生成する。BGM・字幕スタイル・解像度などを指定可能。

**入力項目**
- 原稿ファイル（dialogue_input.txt など）
- 画像リスト（セリフ単位で循環使用）
- BGM（任意）/ 音量
- TTSエンジン（Gemini / VOICEVOX）
  - Gemini: 音声ボイス名
  - VOICEVOX: エンジンURL、話者モード（ローテーション/2人対談）、話者ID/ラベル、話速
- 字幕設定（フォントサイズ、背景透過、背景OFF時のデザイン、文字色、1行最大文字数、黒幕高さ）
- 出力フォルダ
- 解像度（幅/高さ）・FPS

**出力**
- MP4動画（字幕付き）
- 生成時のログ出力

### 2.2 台本生成ページ
**目的**: Gemini / ChatGPT / ClaudeCode を利用して台本を生成する。テンプレート管理と保存機能を備える。

**入力項目**
- 生成AIの選択（Gemini / ChatGPT / ClaudeCode）
- 生成モデル選択（各AIごと）
- ClaudeCode の max_tokens
- プロンプト入力
- テンプレート（新規作成 / 適用 / 上書き / 削除）

**出力**
- 生成結果テキスト
- 生成結果のコピー/保存（dialogue_input.txt 等）

### 2.3 動画タイトル・説明作成ページ
**目的**: 台本（SRT/TXT）からクリックされやすいタイトル案と説明文を生成する。

**入力項目**
- 台本ファイル（SRT / TXT）
- 生成AIの選択（Gemini / ChatGPT / ClaudeCode）
- 生成モデル選択（各AIごと）
- タイトル案の数
- 追加指示（任意: ターゲット/キーワード/トーン等）

**出力**
- タイトル/説明文の生成結果
- 生成結果のコピー

### 2.4 資料作成ページ
**目的**: Gemini Image API を利用し、プロンプトから画像素材を生成する。

**入力項目**
- モデル名
- 画像生成プロンプト

**出力**
- 生成画像プレビュー
- 生成画像の保存（フォルダ指定）

### 2.5 ポンチ絵作成ページ
**目的**: SRT字幕を基に案出しを行い、画像（ポンチ絵）を生成する。

**入力項目**
- SRTファイル
- 出力フォルダ
- 提案生成エンジン（Gemini / ChatGPT）
- 提案用モデル（Gemini/ChatGPT）

**出力**
- 案出し結果（テキスト）
- ポンチ絵生成（Gemini Image）

### 2.6 動画編集ページ（簡易オーバーレイ）
**目的**: MP4に対して画像オーバーレイを指定時間帯・座標で重ねる。

**入力項目**
- 入力動画（MP4）
- 出力動画
- オーバーレイ設定
  - 画像パス
  - 開始/終了（mm:ss / hh:mm:ss）
  - 座標（X/Y）
  - サイズ（w/h, 0で元サイズ）
  - 不透明度

**補助機能**
- プレビュー表示（X/Y/スケール調整）
- オーバーレイ一覧の追加/削除
- JSONインポート（開始/終了 + 画像）
- SRTからの画像検索（Geminiで検索クエリ生成 + SerpAPIで取得）

**出力**
- オーバーレイ付き動画（MP4）
- ログ/進捗表示

### 2.7 詳細動画編集ページ
**目的**: プロジェクト単位で素材、タイムライン、オーバーレイ、音声を管理し、書き出しまで行う。

**主な機能**
- プロジェクト管理
  - 新規/保存/読み込み
  - プロジェクトファイル（.mmproj）
  - 自動保存
- 素材（アセット）管理
  - 追加/削除/再リンク
  - サムネイル表示
- タイムライン
  - メイン動画読み込み
  - クリップ分割/削除/順序変更
  - In/Outのトリミング
- オーバーレイ
  - 画像/テキスト
  - 開始/終了、位置、サイズ、不透明度
  - 文字サイズ・色・縁取り
- 音声
  - BGM追加
  - 動画音声ON/OFF・音量
  - フェードイン/アウト
- プレビュー
  - 再生/停止、シークバー
- 書き出し
  - 解像度/FPS
  - 進捗表示

### 2.8 設定ページ
**目的**: 生成AIのAPIキーを一元管理する。

**管理対象**
- Gemini APIキー
- ChatGPT APIキー
- ClaudeCode APIキー

### 2.9 Aboutページ/ログパネル
- Aboutページでツール説明を表示
- 右パネルにログ/進捗/ステータス表示

## 3. 外部サービス連携
- Gemini API（台本/タイトル生成・画像生成・検索クエリ生成）
- OpenAI API（ChatGPT）
- Anthropic API（ClaudeCode）
- VOICEVOX（TTS）
- SerpAPI（画像検索）

## 4. 設定/データ管理
- 設定ファイル: `~/.news_short_generator_studio.json`
  - 各ページの入力状態、APIキー、オーバーレイ一覧等を保存
- 詳細編集プロジェクト: `.mmproj` (JSON形式)

## 5. 制約/注意事項
- 動画編集は MoviePy 依存（書き出し時間は素材サイズに依存）
- VOICEVOXはローカルでエンジンが起動している必要あり
- 画像検索は SerpAPI キー必須
